# Shesh's NixOS configurations

Добро пожаловать на страницу моего конфига никса!

# Структура по директориям

- `dotfiles`: конфигурационные файлы прикладных программ (nvim, hyprland, etc)
- `environments`: в данный момент два файла. `common.nix` для минимальной сборки без графики, `desktop.nix` дополнительно подключает Hyprland.
- `machines`: всякие hardware штуки, свои для каждой машины
- `options`: отдельные настройки (локализация, настройки nixpkgs, etc)
- `packages`: список софта для установки
- `users`: определение пользователей

# Логическая структура

Точка входа в конфиг - файл `flake.nix`, лежащий в корне. В `nixosConfigurations` перечислены все конфигурации (ну, пока она одна). Далее, для каждой конфигурации из разных директорий подтягиваются необходимые файлы. System-wide необходимо поднятнуть соответствующие файлы из `machines` и задать пользователей с помощью файлов из `users`; выбрать окружение из `environments`. Все остальное делается через home-manager: все пакеты, кроме самых необходимых, ставятся на каждого пользователя отдельно. Импорты home-manager также обозначены в `flake.nix`.

# Known issues
Из-за ошибки на стороне разработчиков не удаётся подключить `os-prober` - его код на C был написан не по стандарту, и старые версии gcc проглатывали, а новая нет. На момент написания текста это ещё не пофикшено. Как пофиксят - вернуть `os-prober` в `options/grub2-multiboot.nix` и выставить там же `useOSProber = true`.

# TO-DO 
- Разобраться, как пользоваться agenix.
- Поставить JetBrainsMono в TTY, см. [тут](https://www.reddit.com/r/linuxquestions/comments/7st7hz/any_way_to_convert_ttf_files_to_psf_files/)
